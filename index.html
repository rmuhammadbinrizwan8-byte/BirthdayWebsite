<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Emaan!</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Satoshi:wght@400;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary-pink: hsla(333, 70%, 55%, 1);
            --primary-red: hsla(355, 80%, 50%, 1);
        }

        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #0c0a09;
            color: #f8fafc;
            font-family: 'Satoshi', sans-serif;
        }

        /* Layer 1: Aurora Background */
        #aurora-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                radial-gradient(circle at 20% 30%, hsla(333,70%,55%,.4) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, hsla(282, 82%, 54%, .3) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, hsla(210, 89%, 60%, .3) 0%, transparent 50%),
                radial-gradient(circle at 10% 80%, hsla(35, 90%, 60%, .3) 0%, transparent 30%);
            filter: blur(60px);
            animation: aurora-flow 20s infinite alternate ease-in-out;
        }

        @keyframes aurora-flow {
            0% { transform: scale(1) translate(0, 0); }
            50% { transform: scale(1.2) translate(2%, 5%); }
            100% { transform: scale(1.1) translate(-2%, -2%); }
        }

        /* 3D Canvas Layer */
        #three-canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
            pointer-events: none;
        }

        /* Glassmorphism Cards */
        .glass-card {
            background: rgba(12, 10, 9, 0.6);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            border-radius: 24px;
            display: none; /* Hidden by default for GSAP */
        }

        .active-card {
            display: block;
        }

        /* Typography */
        .heading-gradient {
            font-family: 'Playfair Display', serif;
            background: linear-gradient(to right, #ffffff, #f9a8d4, #f472b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Progress Bar */
        #progress-container {
            position: fixed;
            top: 2rem;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
            z-index: 100;
        }

        #progress-bar {
            height: 100%;
            width: 20%;
            background: linear-gradient(90deg, var(--primary-pink), var(--primary-red));
            transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* Buttons */
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-pink), var(--primary-red));
            box-shadow: 0 0 20px rgba(236, 72, 153, 0.4);
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 0 30px rgba(236, 72, 153, 0.6);
        }

        .btn-primary:active {
            transform: translateY(1px) scale(0.98);
        }

        /* Polaroid Effect */
        .polaroid {
            background: white;
            padding: 1rem;
            padding-bottom: 2.5rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transform: rotate(-3deg);
            transition: transform 0.1s ease-out;
        }
        
        .polaroid img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .polaroid-caption {
            font-family: 'Playfair Display', serif;
            color: #333;
            text-align: center;
            margin-top: 1rem;
        }

        /* Bento Grid */
        .bento-item {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255,255,255,0.05);
            padding: 1.5rem;
            border-radius: 16px;
        }
    </style>
</head>
<body>

    <div id="aurora-bg"></div>
    <canvas id="three-canvas"></canvas>

    <div id="progress-container">
        <div id="progress-bar"></div>
    </div>

    <main class="relative z-10 flex items-center justify-center min-h-screen p-6">
        
        <div id="step-1" class="glass-card active-card max-w-md w-full p-10 text-center">
            <div class="text-6xl mb-6 animate-bounce">‚ù§Ô∏è</div>
            <h1 class="heading-gradient text-4xl font-bold mb-4">Hey MBR ki Butterfly,</h1>
            <p class="text-slate-300 mb-8 leading-relaxed">I built a little world for you Emaan, just to bring a smile to your face on your special day. MERY BUTTERFLY</p>
            <button onclick="nextStep(2)" class="btn-primary px-8 py-3 rounded-full font-bold text-white uppercase tracking-wider">Let's Begin</button>
        </div>

        <div id="step-2" class="glass-card max-w-md w-full p-10 text-center">
            <div class="text-6xl mb-6">üéâ</div>
            <h1 class="heading-gradient text-4xl font-bold mb-4">Happy Birthday GURIYA!</h1>
            <p class="text-slate-300 mb-8 leading-relaxed">Another year of you making the world brighter. I Miss You Alot Emaan.</p>
            <button onclick="nextStep(3)" class="btn-primary px-8 py-3 rounded-full font-bold text-white uppercase tracking-wider">There's more...</button>
        </div>

        <div id="step-3" class="glass-card max-w-2xl w-full p-8">
            <h1 class="heading-gradient text-3xl font-bold mb-8 text-center">A Few Things I Adore</h1>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                <div class="bento-item md:col-span-2">
                    <h3 class="text-pink-300 font-bold mb-1">‚ú® Your Unmatched Kindness UFFF</h3>
                    <p class="text-sm text-slate-400">The genuine warmth you show to everyone is something truly rare and beautiful.</p>
                </div>
                <div class="bento-item">
                    <h3 class="text-pink-300 font-bold mb-1">üòä That Smile Meri Emaan ki</h3>
                    <p class="text-sm text-slate-400">It's a work of art Really.</p>
                </div>
                <div class="bento-item">
                    <h3 class="text-pink-300 font-bold mb-1">üåü Radiant Spirit</h3>
                    <p class="text-sm text-slate-400">Your passion for life is infectious.</p>
                </div>
            </div>
            <div class="text-center">
                <button onclick="nextStep(4)" class="btn-primary px-8 py-3 rounded-full font-bold text-white uppercase tracking-wider">Remember this?</button>
            </div>
        </div>

        <div id="step-4" class="glass-card max-w-md w-full p-10 text-center">
            <h1 class="heading-gradient text-3xl font-bold mb-8">That One Time...</h1>
            <div class="flex justify-center mb-8">
                <div class="polaroid" id="memory-polaroid">
                    <img src="https://ibb.co/jZvdKvbN alt="Memory">
                    <div class="polaroid-caption">Our favorite memory.</div>
                </div>
            </div>
            <p class="text-slate-300 mb-8 italic">"I know ye uper image reload ni ho rahi hogi LOL. BUT smjho isme wo sab jo humne time guzara. Every moment with you feels like a scene from a movie kasm se. I'd watch on repeat."</p>
            <button onclick="nextStep(5)" class="btn-primary px-8 py-3 rounded-full font-bold text-white uppercase tracking-wider">One last thing...</button>
        </div>

        <div id="step-5" class="glass-card max-w-md w-full p-10 text-center">
            <div class="text-6xl mb-6">üéÇ</div>
            <h1 class="heading-gradient text-4xl font-bold mb-4">My Wish For You EMAAN</h1>
            <p class="text-slate-300 mb-8 leading-relaxed">Allah tumhe hamesha salamat rakhey or khush rakhey tumhe kisi bhi takleef me ni dekh sakhta me. And i MISS YOU ALOT EMAAN.Literally jo waqt mera tumhe sath guzara kabhi ni bholo ga beshk jo bhi ho. Last Time mere se Gussa ho kar gyai thi na I'm really Sorry for that. Me is liye dubara tangh ni kiya kyu k ap bhot irritate hone lag gayi thi mere se lkn Emaan Im Really Sorry AND I Miss Youu Aloottt Cutiee</p>
            <div id="final-message" class="hidden mb-8 text-2xl font-bold text-white opacity-0">
                Happy Birthday, My butterfly! ‚ù§Ô∏è
            </div>
            <button id="celebrate-btn" onclick="startFinale()" class="btn-primary px-8 py-3 rounded-full font-bold text-white uppercase tracking-wider">Celebrate!</button>
        </div>

    </main>

    <script>
        // --- Three.js 3D Hearts ---
        let scene, camera, renderer, hearts = [];
        let heartsMovingUp = false;

        function initThree() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('three-canvas'), alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);

            // Simple Heart Shape
            const shape = new THREE.Shape();
            shape.moveTo(0, 0);
            shape.bezierCurveTo(0, -3, -5, -3, -5, 0);
            shape.bezierCurveTo(-5, 3, 0, 6, 0, 10);
            shape.bezierCurveTo(0, 6, 5, 3, 5, 0);
            shape.bezierCurveTo(5, -3, 0, -3, 0, 0);

            const geometry = new THREE.ExtrudeGeometry(shape, { depth: 1, bevelEnabled: true, bevelThickness: 0.5, bevelSize: 0.5 });
            const material = new THREE.MeshPhongMaterial({ color: 0xff4d6d, shininess: 100 });

            // Ambient and Point Light
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);
            const pointLight = new THREE.PointLight(0xffffff, 1);
            pointLight.position.set(10, 10, 10);
            scene.add(pointLight);

            for (let i = 0; i < 25; i++) {
                const heart = new THREE.Mesh(geometry, material.clone());
                heart.position.set(
                    (Math.random() - 0.5) * 50,
                    (Math.random() - 0.5) * 50,
                    (Math.random() - 0.5) * 20 - 10
                );
                heart.rotation.z = Math.PI; // Correct orientation
                heart.scale.set(0.1, 0.1, 0.1);
                heart.userData = { 
                    speed: 0.005 + Math.random() * 0.01,
                    offset: Math.random() * Math.PI * 2 
                };
                hearts.push(heart);
                scene.add(heart);
            }

            camera.position.z = 30;
            animate();
        }

        function animate() {
            requestAnimationFrame(animate);
            hearts.forEach((heart, i) => {
                if (!heartsMovingUp) {
                    heart.position.y += Math.sin(Date.now() * 0.001 + heart.userData.offset) * 0.01;
                    heart.rotation.y += 0.01;
                } else {
                    heart.position.y += 0.2;
                    heart.position.x += Math.sin(heart.position.y * 0.1) * 0.1;
                    heart.material.opacity -= 0.005;
                    heart.material.transparent = true;
                }
            });
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // --- Navigation Logic ---
        let currentStep = 1;
        function nextStep(step) {
            const currentEl = document.getElementById(`step-${currentStep}`);
            const nextEl = document.getElementById(`step-${step}`);
            
            gsap.to(currentEl, { 
                opacity: 0, 
                y: -20, 
                scale: 0.95, 
                duration: 0.5, 
                onComplete: () => {
                    currentEl.style.display = 'none';
                    nextEl.style.display = 'block';
                    gsap.fromTo(nextEl, 
                        { opacity: 0, y: 20, scale: 1.05 }, 
                        { opacity: 1, y: 0, scale: 1, duration: 0.6, ease: "back.out(1.7)" }
                    );
                    currentStep = step;
                    document.getElementById('progress-bar').style.width = (step * 20) + '%';
                }
            });
        }

        // --- Polaroid Parallax ---
        const polaroid = document.getElementById('memory-polaroid');
        document.addEventListener('mousemove', (e) => {
            if (currentStep === 4) {
                const x = (window.innerWidth / 2 - e.pageX) / 25;
                const y = (window.innerHeight / 2 - e.pageY) / 25;
                polaroid.style.transform = `rotateY(${x}deg) rotateX(${y}deg) rotateZ(-3deg)`;
            }
        });

        // --- Finale ---
        function startFinale() {
            const btn = document.getElementById('celebrate-btn');
            const finalMsg = document.getElementById('final-message');
            
            btn.disabled = true;
            gsap.to(btn, { opacity: 0, duration: 0.5, onComplete: () => btn.style.display = 'none' });
            
            finalMsg.classList.remove('hidden');
            gsap.to(finalMsg, { opacity: 1, y: -10, duration: 1, delay: 0.5 });

            // 3D Hearts Fly Away
            heartsMovingUp = true;

            // Confetti Sequence
            const duration = 5 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                const particleCount = 50 * (timeLeft / duration);
                
                // Corners
                confetti({ ...defaults, particleCount, origin: { x: 0, y: 1 } });
                confetti({ ...defaults, particleCount, origin: { x: 1, y: 1 } });
                
                // Emoji shower
                confetti({
                    ...defaults,
                    particleCount: 5,
                    scalar: 2,
                    shapes: ['text'],
                    shapeOptions: { text: { value: ['‚ù§Ô∏è', 'üíñ', '‚ú®'] } },
                    origin: { x: Math.random(), y: 0 }
                });
            }, 250);
        }

        // Initialize
        window.onload = () => {
            initThree();
            gsap.from(".active-card", { opacity: 0, y: 30, duration: 1, ease: "power4.out" });
        };
    </script>
</body>
</html>